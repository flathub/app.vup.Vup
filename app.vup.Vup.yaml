app-id: app.vup.Vup
runtime: org.gnome.Platform
runtime-version: '43'
sdk: org.gnome.Sdk
add-extensions:
  org.freedesktop.Platform.ffmpeg-full:
    directory : "lib/ffmpeg"
    version: "21.08"
    add-ld-path: .  
cleanup-commands:
- mkdir -p ${FLATPAK_DEST}/lib/ffmpeg      
command: vup
separate-locales: false
finish-args:
- "--share=ipc"
- "--socket=fallback-x11"
- "--socket=wayland"
- "--device=dri"
- "--socket=pulseaudio"
- "--share=network"
- "--filesystem=home"
- "--talk-name=org.kde.StatusNotifierWatcher"
- "--talk-name=org.freedesktop.Notifications"
- "--filesystem=xdg-run/app/com.discordapp.Discord:create"
modules:
- name: libjsoncpp
  buildsystem: cmake
  config_opts:
  - -DCMAKE_BUILD_TYPE=release
  - -DBUILD_SHARED_LIBS=ON
  sources:
  - type: archive
    url: https://github.com/open-source-parsers/jsoncpp/archive/refs/tags/1.7.5.tar.gz
    sha256: 4338c6cab8af8dee6cdfd54e6218bd0533785f552c6162bb083f8dd28bf8fbbe
- name: libsodium
  buildsystem: autotools
  sources:
  - type: archive
    url: https://github.com/jedisct1/libsodium/archive/refs/tags/1.0.18-RELEASE.tar.gz
    sha256: b7292dd1da67a049c8e78415cd498ec138d194cfdb302e716b08d26b80fecc10
- name: intltool
  buildsystem: autotools
  sources: 
  - type: archive
    url: https://gitlab.gnome.org/World/intltool/-/archive/release-0_51_0/intltool-release-0_51_0.tar.gz
    sha256: 3d16e312265cf92658668d1aace692e3bfa8ff08b3449a124571b320ae3a8eac
- shared-modules/libappindicator/libappindicator-gtk3-introspection-12.10.json
- shared-modules/libsecret/libsecret.json
- name: vup
  buildsystem: simple
  build-commands:
  - mkdir -p Vup
  - unzip Vup-0.12.0-BETA-Linux.zip -d build
  - cp -r build/* Vup
  - cp -r Vup /app/
  - chmod +x /app/Vup/vup
  - mkdir -p /app/bin
  - ln -s /app/Vup/vup /app/bin/vup
  - mkdir -p /app/share/metainfo
  - cp -r app.vup.Vup.metainfo.xml /app/share/metainfo/
  - mkdir -p /app/share/icons/hicolor/scalable/apps
  - cp -r icon.png /app/share/icons/hicolor/scalable/apps/app.vup.Vup.png
  - mkdir -p /app/share/applications
  - cp -r app.vup.Vup.desktop /app/share/applications/
  - mkdir -p /app/share/appdata
  - cp -r app.vup.Vup.metainfo.xml /app/share/appdata/
  sources:
  - type: file
    path: icon.png
  - type: file
    path: app.vup.Vup.metainfo.xml
  - type: file
    path: app.vup.Vup.desktop
  - type: file
    url: https://github.com/redsolver/vup/releases/download/v0.12.0/Vup-0.12.0-BETA-Linux.zip
    sha256: db6bae656ec34a62bced238d4769ea9d6d5fbe97594ea24022f466606aabe8f8


